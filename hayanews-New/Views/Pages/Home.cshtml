@using Comman.Enums
@using Comman.Helpers
@using Models
@using Resources
@using Resources.App_GlobalResources
@using WebDesign.UI.Framework.Utilities
@{
    Layout = "../shared/_Layout.cshtml";
}
@{
     var special = true;
     var latest = true;
}

@{
    var editMode = Request.IsAuthenticated && (Roles.GetRolesForUser().Contains(Settings.AdminRole) || Roles.GetRolesForUser().Contains(Settings.ProgrammerRole));
    var keys = new List<string>() { "تیتر1","تیتر2"};
    string s = Html.Action("GetContentsValueByKeys", "ContentLocalized", new { keys, ishtml = true }).ToString();
    var result = new System.Web.Script.Serialization.JavaScriptSerializer()
        .Deserialize<List<ContentItems>>(s);
}

@section cssTop    {
    <!-- materialdesignicons -->
<link href="/GlobalItems/fonts/materialFontIcon/css/materialdesignicons.min.css" rel="stylesheet">
<!-- Bootstrap -->
<link href="/themes/hayanews/static/css/bootstrap.min.css" rel="stylesheet">
<!-- base -->
<link href="/themes/hayanews/static/css/style.css" rel="stylesheet">
<!-- menu-resize -->
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menuResize/menuResize.css" media="all" />
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menu/menu.css" media="all" />
<!--carousel-->
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.carousel.css" media="all" />
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.theme.css" media="all" />
<!-- form-material-->
<link type="text/css" rel="stylesheet" href="/GlobalItems/form-material/style/form-material.css" media="all" />
}

@section Title
{
    @Html.Action("GetDefaultPagesTitle", "Home")
    <link rel="canonical" href="@string.Concat("http://", Settings.GetDomain(true))" itemprop="url">
}

@section Banner
{
    @Html.Action("GetAllSlidesByDisplayOrder", "SlidesLocalized")
}
    <div section-sort="sectionsort">
        <section online-edit='true' datawidget='{"Widget":[  {"WidgetName":"Section","WidgetFarsiName":"تنظیمات سکشن" }]}' data-position="1" data-sectionid="part1" class="part1">
            <div data-enabled="enabled" class="container">
                <h3 class="title">
                    @{
                    var key2 = "تیتر1";
                    if (editMode)
                    {
                        <button class="btn btn-large btn-block" type="button" onclick="SetNewValues('@string.Concat("editable_", key2)')">ثبت تغییرات </button>
                        <div id="editable_@key2" contenteditable="true">

                            @{
                            var firstOrDefault = result.FirstOrDefault(x => x.Key == key2);
                            if (firstOrDefault != null)
                            {
                                WriteLiteral(firstOrDefault.Value);
                            }
                            }
                        </div>
                }
                else
                {
                    var firstOrDefault = result.FirstOrDefault(x => x.Key == key2);
                    if (firstOrDefault != null)
                    {

                        WriteLiteral(firstOrDefault.Value);



                    }
                }

                    }
                    @*@CustomRoutItemsTools.GetCustomName(RoutItemEntityName.News, () => Resource.News, () => Resource.TheMostImportant)
                    @{ Write(LanguageHelper.GetLang() == "fa" ? "و یا" : "or"); }
                    @CustomRoutItemsTools.GetCustomName(RoutItemEntityName.Aricles, () => Resource.Articles)*@
                </h3>
                <div id="two" class="owl-carousel">
                    @Html.Action("GetSpecialPosts", "PostsLocalized", new { count = 10, type = PostsType.News })
                    @Html.Action("GetSpecialPosts", "PostsLocalized", new { count = 10, type = PostsType.Article })
                </div>
            </div>
        </section>

        <section online-edit='true' datawidget='{"Widget":[  {"WidgetName":"Section","WidgetFarsiName":"تنظیمات سکشن" }]}' data-position="1" data-sectionid="part0" class="part0">
            <div data-enabled="enabled" class="container">
                <h3 class="title">
                    @{
                    key2 = "تیتر2";
                    if (editMode)
                    {
                        <button class="btn btn-large btn-block" type="button" onclick="SetNewValues('@string.Concat("editable_", key2)')">ثبت تغییرات </button>
                        <div id="editable_@key2" contenteditable="true">

                            @{
                            var firstOrDefault = result.FirstOrDefault(x => x.Key == key2);
                            if (firstOrDefault != null)
                            {
                                WriteLiteral(firstOrDefault.Value);
                            }
                            }
                        </div>
                }
                else
                {
                    var firstOrDefault = result.FirstOrDefault(x => x.Key == key2);
                    if (firstOrDefault != null)
                    {

                        WriteLiteral(firstOrDefault.Value);



                    }
                }

                    }
                    @*@CustomRoutItemsTools.GetCustomName(RoutItemEntityName.News, () => Resource.News,()=>Resource.Final)*@
                </h3>
                <div id="new_news" class="owl-carousel">
                    @Html.Action("GetLastPost", "PostsLocalized", new { count = 5, type = PostsType.News })
                </div>
            </div>
        </section>

        <section online-edit='true' datawidget='{"Widget":[  {"WidgetName":"Section","WidgetFarsiName":"تنظیمات سکشن" }]}' data-position="1" data-sectionid="part2" class="part2">
            <div data-enabled="enabled" class="container">
                @Html.Action("_PostsCategoriesListPartial", "PostsLocalized", new { type = PostsType.News, partialName = "_PostsCategoriesList" })
                @Html.Action("GetPostsSpecialAndLatest", "PostsLocalized", new { count = 21, special, latest, type = PostsType.News })
            </div>
        </section>

</div>


        <p id="back-top">
            <a href="#top"><span class="mdi mdi-chevron-up"></span></a>
        </p>


        @section jsBottom{
            <!-- start script -->
            <script type="text/javascript" src="/themes/hayanews/static/js/jquery.min.js"></script>
            <script type="text/javascript" src="/themes/hayanews/static/js/bootstrap.min.js"></script>
            <!-- ripplink -->
            <script src="/themes/hayanews/static/js/ripplink.js"></script>
            <!-- menu -->
            <script src="/themes/hayanews/static/js/menu/bootstrap-dropdownhover.js"></script>
            <!-- custom -->
            <script src="/themes/hayanews/static/js/custom.js"></script>
            <!--carousel-->
            <script src="/themes/hayanews/static/js/carousel/owl.carousel.js"></script>
            <!--backToTop-->
            <script src="/themes/hayanews/static/js/backToTop/backToTop.js"></script>
            <!-- material-->
            <script type="text/javascript" src="/GlobalItems/form-material/style/form-material.js"></script>
        }
