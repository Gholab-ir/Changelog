@using Comman.Enums
@using Comman.Helpers
@using Models
@using Resources
@using Resources.App_GlobalResources
@using Utility.HtmlHelpers
@model WebDesign.Domain.PostsLoclized
@using WebDesign.UI.Tools
@using WebDesign.UI.Framework.SharedObjects
@{Layout = "../shared/_Layout.cshtml";}

@section Title {<title>@Model.Title</title>}

@section head {
    @if (!string.IsNullOrEmpty(Model.Abstract))
    {
<meta name="description" content="@Model.Abstract" />
    }
    else
    {
        @Html.Action("GetDefaultMeta", "Home")
    }
}
@section cssTop
{
<!-- Bootstrap -->
<link href="/GlobalItems/fonts/materialFontIcon/css/materialdesignicons.min.css" rel="stylesheet">
<link href="/themes/hayanews/static/css/bootstrap.min.css" rel="stylesheet">
<link href="/themes/hayanews/static/css/style.css" rel="stylesheet">
<link href="/themes/hayanews/static/css/otherpage.css" rel="stylesheet">
<!-- menu-resize -->
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menuResize/menuResize.css" media="all" />
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menu/menu.css" media="all" />
<!--carousel-->
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.carousel.css" media="all" />
<link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.theme.css" media="all" />
<!-- form-material-->
<link type="text/css" rel="stylesheet" href="/GlobalItems/form-material/style/form-material.css" media="all" />

}


@{

    var related = "مقالات مرتبط";
    if (ViewContext.RouteData.Values["lang"] != null && ViewContext.RouteData.Values["lang"].ToString().ToLower() == "en")
    {

        related = "Related Articles";
    }
}

@try
{
    var currentLang = SharedObjectResolver.Configs.CurrentRequestCulture;
    var ListPostsLocalizedModels = new ListPostsLocalizedModels();
    var image = Html.Imagehelper(Model.Posts.DefaultImage);
    var date = Model.Posts.CreateDate;
    var newDateConverted = DateTimeHelper.GetSplitedPersian(date);
    var localDay = newDateConverted.Item3;
    var localMonth = newDateConverted.Item2;
    var localYear = newDateConverted.Item1;
    if (!string.IsNullOrEmpty(LanguageHelper.GetCurrentCulture()) && LanguageHelper.GetCurrentCulture() != "fa-IR")
    {
        localDay = date.Day.ToString();
        localYear = date.Year.ToString();
    }
<section class="Breadcrumbs">
    <div class="container">
        <div class="bread-crumb">
            @Html.Action("GetPostBreadCrumb", "PostsLocalized", new { postsLocalized = Model, type = Model.Posts.PostsCategories.Type })


        </div>
    </div>
</section>
<!-- start content -->
<section class="topnews">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
                <h4 class="titlenews">@Model.Title</h4>
                <h5 class="titlesection">@{ Write(LanguageHelper.GetLang() == "fa" ? "خلاصه خبر" : "News Summary"); }</h5>
                <div class="text-news ellipsis">
                    <span class="text-news-section">
                        @{ WriteLiteral(WebUtility.HtmlDecode(Model.Abstract)); } ...
                    </span>
                </div>
                <div class="datenews">
                    <span>@localYear/@localDay/@localMonth</span>
                </div>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-12 news-img">
                <img src="@image" class="top-pic-news-img img-responsive" />
            </div>
        </div>
    </div>
</section>
<section class="main">
    <div class="container">
        <div class="otherPages">

            <div class="contet">
                <h5 class="title margint60">@{ Write(LanguageHelper.GetLang() == "fa" ? "مشروح خبر" : "Detailed news"); }</h5>
                <p>
                    @{WriteLiteral(WebUtility.HtmlDecode(Model.Desc));}
                </p>
            </div>
        </div>
    </div>
</section>
<section class="newsrealated">
    <div class="container">
        <h4 class="title" style="margin:0">
            @if (Model.Posts.PostsCategories.Type == PostsType.Article)
            {
            <h4 class="title" style="margin: 0">@{ Write(LanguageHelper.GetLang() == "fa" ? " اطلاعیه های مرتبط" : "Related Article"); } </h4>
            }
            else
            {
            <h4 class="title" style="margin: 0">@{ Write(LanguageHelper.GetLang() == "fa" ? " اخبار مرتبط" : "Related Article"); } </h4>

            }
        </h4>
        <div id="new_news" class="owl-carousel">
            @{
            var news = Model.Posts.PostsCategories.Posts.Select(x => x.PostsLoclized.FirstOrDefault(z => z.Languages.LanguagesCodes.Code == currentLang && z.Id != Model.Id)).ToList();
            if (news.Any())
            {
            foreach (var item in news)
            {
            if (item != null)
            {
            var url = UrlTools.GetNewsDetailsUrl(item);
            var imagePath = Html.Imagehelper(item.Posts.DefaultImage);
            <div class="item" onclick="window.location.href = '@url'">
                <div class="caption">
                    <img src="@imagePath" alt="@item.Title">
                    <div class="back ">
                        <a href="#">@item.Title</a>
                        <p>@{ WriteLiteral(item.Abstract); }  </p>
                    </div>
                </div>
            </div>
            }
            }
            }
            }
        </div>
    </div>

</section>
<!-- end content -->
<section class="comment">
    <div class="container">
        <div class="productfour">
            <div class="container">
                <div class="row">
                    <div class="col-md-5 col-sm-5 col-xs-12 comments">

                        <h4 class="title tcom">@{ Write(LanguageHelper.GetLang() == "fa" ? "نظرات کاربران" : "User comments"); }</h4>
                        <!-- send comment -->
                        @Html.Action("InitializeComment", "Comments", new { commentsType = CommentsType.Comments, entityName = EntitiesName.posts, parentEntityId = Model.PostsId })
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12 parentcommentList">
                        <div class="clearfix"></div>
                        <div class="commentList">
                            <!--comment sended -->
                            @Html.Action("GetCommentsByEntityId", "Comments", new { parentEntityId = Model.PostsId, entityName = EntitiesName.posts })



                        </div>

                    </div>


                </div>
            </div>
        </div>
    </div>

</section>
                    }
                    catch
                    { }

@section jsBottom{
<script type="text/javascript" src="/themes/hayanews/static/js/jquery.min.js"></script>

<script type="text/javascript" src="/themes/hayanews/static/js/bootstrap.min.js"></script>
<!-- ripplink -->
<script src="/themes/hayanews/static/js/ripplink.js"></script>
<!-- menu -->
<script src="/themes/hayanews/static/js/menu/bootstrap-dropdownhover.js"></script>
<!-- custom -->
<script src="/themes/hayanews/static/js/custom.js"></script>
<!--backToTop-->
<script src="/themes/hayanews/static/js/backToTop/backToTop.js"></script>
<!--carousel-->
<script src="/themes/hayanews/static/js/carousel/owl.carousel.js"></script>
<!-- material-->
<script type="text/javascript" src="/GlobalItems/form-material/style/form-material.js"></script>
<script>
    var recaptcha1;
    var myCallBack = function () {
        //Render the recaptcha1 on the element with ID "recaptcha1"
        recaptcha1 = grecaptcha.render('recaptcha1', {
            'sitekey': '6LcjIQgUAAAAAOs7CM4zRv8hElhAa7ZWsqjCHIY3', //Replace this with your Site key
            'theme': 'light'
        });
    };
</script>
<script src="https://www.google.com/recaptcha/api.js?hl=fa&onload=myCallBack&render=explicit" async defer></script>
}


























































