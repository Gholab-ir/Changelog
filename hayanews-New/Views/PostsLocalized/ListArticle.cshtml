@using Comman.Helpers
@using System.Web.Mvc.Html
@using Comman.Enums
@using Models
@using Resources
@using Resources.App_GlobalResources
@using Utility.HtmlHelpers
@using WebDesign.Domain
@using WebDesign.UI.Tools
@using WebDesign.UI.Framework.SharedObjects
@model ListPostsLocalizedModels
@{
    Layout = "../shared/_Layout.cshtml";
}
@section title{
    <title>@ResourceLocalization.GetResource(() => Resource.Articles)</title>
}
@section cssTop{
    <!-- Bootstrap -->
    <link href="/GlobalItems/fonts/materialFontIcon/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="/themes/hayanews/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/themes/hayanews/static/css/style.css" rel="stylesheet">
    <link href="/themes/hayanews/static/css/otherpage.css" rel="stylesheet">
    <!-- menu-resize -->
    <link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menuResize/menuResize.css" media="all" />
    <link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/menu/menu.css" media="all" />
    <!--carousel-->
    <link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.carousel.css" media="all" />
    <link rel="stylesheet" type="text/css" href="/themes/hayanews/static/css/carousel/owl.theme.css" media="all" />
    <!-- form-material-->
    <link type="text/css" rel="stylesheet" href="/GlobalItems/form-material/style/form-material.css" media="all" />

}
@section Banner
{
    @Html.Action("GetAllSlidesByDisplayOrder", "SlidesLocalized")
}
<section class="Breadcrumbs">
    <div class="container">
        <div class="bread-crumb">
 
            @Html.Action("GetPostBreadCrumb", "PostsLocalized", new { postsLocalized = Model.Posts.Any() ? Model.Posts.FirstOrDefault() : new PostsLoclized(), type = PostsType.Article, partialName = "/Themes/hayanews/views/shared/_PostBreadCrumbPartial.cshtml" })
        </div>
    </div>
</section>
<section class="rowTop">
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-xs-12 col-sm-6"><div class="newslisttitle"><h1>@TempData["CategoryName"]</h1></div></div>
            <div class="col-md-3 col-xs-12 col-sm-6">
                @*<div class="sort-list">
                    <span class="selected">@{ Write(LanguageHelper.GetLang() == "fa" ? "جدیدترین" : "the newest"); }</span>
                    <span>@{ Write(LanguageHelper.GetLang() == "fa" ? "قدیمی ترین" : "The oldest"); }</span>
                </div>*@
                <div class="btnList">
                    <a href="" class="list"></a>
                    <a href="" class="grid activeBtn"></a>
                </div>
            </div>
            <div class="col-md-4 col-xs-12 col-sm-8">
                <div class="paging-model2 pull-right">
                    <div class="paging">
                        @{ Html.RenderPartial(Url.Content("/Themes/hayanews/Views/Shared/_ListPostPagingPartial.cshtml"), Model.PagingInfo, new ViewDataDictionary { { "PageSize", Model.PageSize }, { "PostType", PostsType.News } }); }
                        <div class="select-wrapper initialized">
                            @Html.DropDownListFor(m => m.PageSize, Model.PageSize, new { onchange = "SetPageItems(this);", id = "PageSizedropDownList", Model.PagingInfo.ItemsPerPage })
                        </div>
                        <span class="Rowtxt"> @ResourceLocalization.GetResource(() => Resource.Pagging_ItemsPerPage)</span>
                    </div>
                </div>

            </div>
            <div class="col-md-3 col-xs-12 col-sm-4">
                <div class="categoryMargin">
                    <div class="parentCategori">
                        <a class="sidebar-widget-title">
                            <i class="mdi mdi-menu"></i>
                            <span>@ResourceLocalization.GetResource(() => Resource.ArticlesCategory)</span>
                            <i class="toggleCategori"></i>
                        </a>
                        @Html.Action("_PostsCategoriesListPartial", "PostsLocalized", new { type = PostsType.Article })

                    </div>
                </div>
            </div>

        </div>
    </div>
</section>



<section class="content">
    <div class="container">
        <div class="row products-list">
            @foreach (var item in Model.Posts.ToList())
            {
                var currentLang = SharedObjectResolver.Configs.CurrentRequestCulture;
                var detailsUrl = UrlTools.GetNewsDetailsUrl(item);
                var imagePath = Html.Imagehelper(item.Posts.DefaultImage);
                var dateResult = DateTimeHelper.GetDateByLang(item.Posts.CreateDate);
                var localDay = dateResult.AsDateTime().Day;
                var localMonth = DateTimeHelper.GetFriendlyMonth(item.Posts.CreateDate, currentLang); /*LanguageHelper.GetCurrentCulture()*/
                var localYear = dateResult.AsDateTime().Year;
                <div class="col-md-3 col-sm-6 col-xs-12" onclick="window.location.href='@detailsUrl'">
                    <div class="caption">
                        <img src="@imagePath" alt="">
                        <div class="back ">
                            <a href="@detailsUrl">@item.Title</a>
                            <p>@item.Abstract</p>
                            <span>@{ Write(LanguageHelper.GetLang() == "fa" ? "مشاهده..." : "view..."); }</span>
                        </div>
                    </div>
                </div>
            }


        </div>
        <div class="paging-model2 pull-left">
            <div class="paging">
                @{ Html.RenderPartial(Url.Content("/Themes/hayanews/Views/Shared/_ListPostPagingPartial.cshtml"), Model.PagingInfo, new ViewDataDictionary { { "PageSize", Model.PageSize }, { "PostType", PostsType.Article } }); }
            </div>
        </div>
    </div>
</section>





@section jsBottom{
    <!-- start script -->
    <script type="text/javascript" src="/themes/hayanews/static/js/jquery.min.js"></script>

    <script type="text/javascript" src="/themes/hayanews/static/js/bootstrap.min.js"></script>
    <!-- ripplink -->
    <script src="/themes/hayanews/static/js/ripplink.js"></script>
    <!-- menu -->
    <script src="/themes/hayanews/static/js/menu/bootstrap-dropdownhover.js"></script>
    <!-- custom -->
    <script src="/themes/hayanews/static/js/custom.js"></script>
    <!--backToTop-->
    <script src="/themes/hayanews/static/js/backToTop/backToTop.js"></script>
    <!-- material-->
    <script type="text/javascript" src="/GlobalItems/form-material/style/form-material.js"></script>
    @{ Html.RenderPartial(Url.Content("/Themes/Views/SharedItems/_ArticleListPagingDropdownConfigPartial.cshtml")); }


}


